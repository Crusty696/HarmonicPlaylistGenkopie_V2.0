[pytest]
# Pytest configuration for Harmonic Playlist Generator

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for test categorization
markers =
    unit: Unit tests for individual components
    integration: Integration tests for component interaction
    performance_test: Performance and scalability tests (slow)
    acceptance: User acceptance tests for professional requirements
    regression: Regression tests for backward compatibility
    slow: Tests that take longer to run
    requires_audio: Tests that require real audio files
    gui: GUI-related tests that may require display
    exporter: Tests for playlist export functionality (M3U8, Rekordbox XML)

# Test execution options (combined)
addopts =
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --durations=10
    --color=yes
    --disable-warnings
    -ra
    --cov=hpg_core
    --cov-report=html:htmlcov
    --cov-report=term-missing
    --cov-fail-under=70

# Minimum Pytest version
minversion = 6.0

# Test timeout (10 minutes for long-running tests)
# timeout = 600  # Requires pytest-timeout plugin

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:librosa.*
    ignore::UserWarning:mutagen.*
    error::UserWarning:hpg_core.*

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Parallel execution (install pytest-xdist for this)
# addopts = -n auto

# Environment variables are set in conftest.py or shell
# TESTING = 1
# PYTHONPATH = .
